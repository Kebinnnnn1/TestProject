{% extends 'accounts/base.html' %}
{% block title %}File Converter â€” Convertly{% endblock %}
{% block meta_description %}Free online file converter by Convertly. Convert images, PDFs and text files instantly in
your browser. No uploads, no limits.{% endblock %}

{% block extra_head %}
<style>
    /* â”€â”€â”€ Page shell â”€â”€â”€ */
    .cv-page {
        background: var(--surface);
        min-height: 100vh;
    }

    /* â”€â”€â”€ Hero â”€â”€â”€ */
    .cv-hero {
        position: relative;
        overflow: hidden;
        padding: 5rem 0 4rem;
        background: var(--surface);
    }

    .cv-hero .blob {
        position: absolute;
        border-radius: 50%;
        filter: blur(80px);
        pointer-events: none;
        animation: blobPulse 8s ease-in-out infinite;
    }

    .cv-hero .b1 {
        width: 500px;
        height: 500px;
        background: radial-gradient(circle, rgba(67, 97, 238, .18), transparent 70%);
        top: -150px;
        right: -80px;
    }

    .cv-hero .b2 {
        width: 400px;
        height: 400px;
        background: radial-gradient(circle, rgba(255, 107, 53, .15), transparent 70%);
        bottom: -100px;
        left: -80px;
        animation-delay: 3s;
    }

    .cv-hero .b3 {
        width: 300px;
        height: 300px;
        background: radial-gradient(circle, rgba(114, 9, 183, .12), transparent 70%);
        top: 40%;
        left: 45%;
        animation-delay: 5s;
    }

    .cv-badge {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        background: linear-gradient(135deg, rgba(67, 97, 238, .1), rgba(114, 9, 183, .08));
        border: 1px solid rgba(67, 97, 238, .25);
        border-radius: 50px;
        padding: .45rem 1.1rem;
        font-size: .82rem;
        font-weight: 600;
        color: var(--blue);
        margin-bottom: 1.4rem;
    }

    .cv-badge .dot {
        width: 7px;
        height: 7px;
        background: var(--orange);
        border-radius: 50%;
        animation: blobPulse 2s ease-in-out infinite;
    }

    .cv-title {
        font-size: clamp(2.2rem, 5vw, 3.8rem);
        font-weight: 900;
        letter-spacing: -2px;
        line-height: 1.1;
        color: var(--text-dark);
        margin-bottom: 1rem;
    }

    .cv-sub {
        font-size: 1.05rem;
        color: var(--text-mid);
        line-height: 1.7;
        max-width: 500px;
        margin-bottom: 2rem;
    }

    /* â”€â”€â”€ Floating format chips â”€â”€â”€ */
    .fmt-chips {
        display: flex;
        flex-wrap: wrap;
        gap: .6rem;
        margin-bottom: 2.5rem;
    }

    .fmt-chip {
        padding: .35rem .9rem;
        border-radius: 20px;
        font-size: .78rem;
        font-weight: 700;
        border: 1.5px solid;
        display: flex;
        align-items: center;
        gap: 5px;
        animation: floatY 4s ease-in-out infinite;
    }

    .fmt-chip.pdf {
        color: #e74c3c;
        border-color: rgba(231, 76, 60, .3);
        background: rgba(231, 76, 60, .08);
        animation-delay: 0s;
    }

    .fmt-chip.png {
        color: #2ecc71;
        border-color: rgba(46, 204, 113, .3);
        background: rgba(46, 204, 113, .08);
        animation-delay: .5s;
    }

    .fmt-chip.jpg {
        color: #f39c12;
        border-color: rgba(243, 156, 18, .3);
        background: rgba(243, 156, 18, .08);
        animation-delay: 1s;
    }

    .fmt-chip.webp {
        color: #3498db;
        border-color: rgba(52, 152, 219, .3);
        background: rgba(52, 152, 219, .08);
        animation-delay: 1.5s;
    }

    .fmt-chip.doc {
        color: #4361ee;
        border-color: rgba(67, 97, 238, .3);
        background: rgba(67, 97, 238, .08);
        animation-delay: 2s;
    }

    .fmt-chip.txt {
        color: #718096;
        border-color: rgba(113, 128, 150, .3);
        background: rgba(113, 128, 150, .08);
        animation-delay: 2.5s;
    }

    /* â”€â”€â”€ Converter card â”€â”€â”€ */
    .cv-card {
        background: var(--surface-2);
        border: 1px solid var(--border);
        border-radius: 28px;
        padding: 2.5rem;
        box-shadow: var(--shadow-lg);
        position: relative;
        z-index: 1;
    }

    /* â”€â”€â”€ Drop zone â”€â”€â”€ */
    .drop-zone {
        border: 2.5px dashed rgba(67, 97, 238, .35);
        border-radius: 20px;
        padding: 3rem 2rem;
        text-align: center;
        cursor: pointer;
        transition: all .25s;
        background: var(--surface);
        position: relative;
    }

    .drop-zone.drag-over {
        border-color: var(--blue);
        background: rgba(67, 97, 238, .06);
        transform: scale(1.01);
    }

    .drop-zone.has-file {
        border-color: var(--orange);
        border-style: solid;
    }

    .drop-icon {
        font-size: 3rem;
        margin-bottom: .8rem;
        display: block;
    }

    .drop-title {
        font-size: 1.1rem;
        font-weight: 700;
        color: var(--text-dark);
    }

    .drop-sub {
        font-size: .85rem;
        color: var(--text-light);
        margin-top: .3rem;
    }

    .drop-input {
        position: absolute;
        inset: 0;
        opacity: 0;
        cursor: pointer;
        width: 100%;
        height: 100%;
    }

    .file-preview {
        display: none;
        align-items: center;
        gap: 12px;
        padding: 1rem;
        border-radius: 12px;
        background: var(--surface-3);
        margin-top: 1rem;
        border: 1px solid var(--border);
    }

    .file-preview.show {
        display: flex;
    }

    .fp-icon {
        width: 44px;
        height: 44px;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.3rem;
        flex-shrink: 0;
    }

    .fp-name {
        font-size: .88rem;
        font-weight: 600;
        color: var(--text-dark);
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        max-width: 200px;
    }

    .fp-size {
        font-size: .75rem;
        color: var(--text-light);
    }

    .fp-remove {
        margin-left: auto;
        background: none;
        border: none;
        color: var(--text-light);
        cursor: pointer;
        font-size: 1.1rem;
        padding: .25rem;
        border-radius: 6px;
        transition: color .2s;
    }

    .fp-remove:hover {
        color: #dc2626;
    }

    /* â”€â”€â”€ Format selector â”€â”€â”€ */
    .format-row {
        display: flex;
        align-items: center;
        gap: 1rem;
        margin-top: 1.5rem;
        flex-wrap: wrap;
    }

    .format-box {
        flex: 1;
        min-width: 120px;
    }

    .format-box label {
        font-size: .72rem;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: .05em;
        color: var(--text-light);
        display: block;
        margin-bottom: .4rem;
    }

    .format-select {
        width: 100%;
        padding: .65rem 2rem .65rem .9rem;
        border-radius: 12px;
        border: 1.5px solid var(--border);
        background: var(--surface);
        color: var(--text-dark);
        font-size: .9rem;
        font-weight: 600;
        cursor: pointer;
        appearance: none;
        -webkit-appearance: none;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='6' fill='none'%3E%3Cpath d='M1 1l4 4 4-4' stroke='%23718096' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: right 10px center;
        transition: border-color .2s;
    }

    .format-select:focus {
        outline: none;
        border-color: var(--blue);
        box-shadow: 0 0 0 3px rgba(67, 97, 238, .12);
    }

    .swap-btn {
        width: 40px;
        height: 40px;
        border-radius: 12px;
        border: 1.5px solid var(--border);
        background: var(--surface);
        color: var(--blue);
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        font-size: 1.1rem;
        transition: all .2s;
        flex-shrink: 0;
        margin-top: 18px;
    }

    .swap-btn:hover {
        background: var(--blue);
        color: #fff;
        border-color: var(--blue);
    }

    /* â”€â”€â”€ Convert button â”€â”€â”€ */
    .btn-convert {
        width: 100%;
        margin-top: 1.5rem;
        padding: 1rem;
        border-radius: 14px;
        background: linear-gradient(135deg, var(--blue), var(--purple));
        border: none;
        color: #fff;
        font-size: 1rem;
        font-weight: 700;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        transition: all .25s;
        box-shadow: 0 8px 24px rgba(67, 97, 238, .3);
    }

    .btn-convert:hover:not(:disabled) {
        transform: translateY(-2px);
        box-shadow: 0 12px 32px rgba(67, 97, 238, .4);
    }

    .btn-convert:disabled {
        opacity: .5;
        cursor: not-allowed;
        transform: none;
    }

    /* â”€â”€â”€ Download banner â”€â”€â”€ */
    .download-banner {
        display: none;
        margin-top: 1.2rem;
        padding: 1.1rem 1.5rem;
        border-radius: 14px;
        background: linear-gradient(135deg, rgba(16, 185, 129, .12), rgba(34, 197, 94, .06));
        border: 1.5px solid rgba(16, 185, 129, .3);
        align-items: center;
        gap: 12px;
    }

    .download-banner.show {
        display: flex;
    }

    .btn-download {
        margin-left: auto;
        padding: .55rem 1.4rem;
        border-radius: 10px;
        background: #10b981;
        border: none;
        color: #fff;
        font-size: .88rem;
        font-weight: 700;
        cursor: pointer;
        transition: all .2s;
        white-space: nowrap;
        display: flex;
        align-items: center;
        gap: 6px;
    }

    .btn-download:hover {
        background: #059669;
        transform: translateY(-1px);
    }

    /* â”€â”€â”€ Progress bar â”€â”€â”€ */
    .progress-wrap {
        display: none;
        margin-top: 1rem;
    }

    .progress-wrap.show {
        display: block;
    }

    .progress-bar-bg {
        height: 6px;
        background: var(--border);
        border-radius: 3px;
        overflow: hidden;
    }

    .progress-bar-fill {
        height: 100%;
        width: 0%;
        background: linear-gradient(90deg, var(--blue), var(--purple));
        border-radius: 3px;
        transition: width .3s;
    }

    /* â”€â”€â”€ Supported formats section â”€â”€â”€ */
    .formats-section {
        padding: 5rem 0;
    }

    .fmt-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
        gap: 1rem;
        margin-top: 2rem;
    }

    .fmt-card {
        background: var(--surface-2);
        border: 1px solid var(--border);
        border-radius: 16px;
        padding: 1.25rem;
        text-align: center;
        transition: all .25s;
    }

    .fmt-card:hover {
        transform: translateY(-4px);
        border-color: rgba(67, 97, 238, .3);
        box-shadow: var(--shadow-md);
    }

    .fmt-card .fc-icon {
        font-size: 1.8rem;
        margin-bottom: .5rem;
    }

    .fmt-card .fc-name {
        font-size: .8rem;
        font-weight: 700;
        color: var(--text-dark);
        text-transform: uppercase;
        letter-spacing: .05em;
    }

    .fmt-card .fc-desc {
        font-size: .72rem;
        color: var(--text-light);
        margin-top: .2rem;
    }

    /* â”€â”€â”€ Steps section â”€â”€â”€ */
    .steps-section {
        padding: 5rem 0;
        background: var(--surface-2);
    }

    .step-card {
        background: var(--surface);
        border: 1px solid var(--border);
        border-radius: 24px;
        padding: 2rem;
        text-align: center;
        position: relative;
        overflow: hidden;
        height: 100%;
        transition: transform .3s, box-shadow .3s;
    }

    .step-card:hover {
        transform: translateY(-6px);
        box-shadow: var(--shadow-md);
    }

    .step-num {
        width: 52px;
        height: 52px;
        border-radius: 16px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.4rem;
        margin: 0 auto 1.2rem;
    }

    .step-card h5 {
        font-weight: 700;
        color: var(--text-dark);
        margin-bottom: .5rem;
    }

    .step-card p {
        color: var(--text-light);
        font-size: .9rem;
        line-height: 1.6;
        margin: 0;
    }

    .step-connector {
        position: absolute;
        top: 50%;
        right: -20px;
        width: 40px;
        height: 2px;
        background: linear-gradient(90deg, var(--blue), var(--purple));
        transform: translateY(-50%);
        z-index: 2;
    }

    /* â”€â”€â”€ Security section â”€â”€â”€ */
    .security-section {
        padding: 5rem 0;
    }

    .sec-card {
        background: linear-gradient(135deg, #0d1117, #1a1a2e);
        border-radius: 28px;
        padding: 4rem 3rem;
        text-align: center;
        position: relative;
        overflow: hidden;
        color: #fff;
    }

    .sec-card::before {
        content: '';
        position: absolute;
        top: -30%;
        right: -5%;
        width: 400px;
        height: 400px;
        background: radial-gradient(circle, rgba(67, 97, 238, .2), transparent 70%);
        border-radius: 50%;
        animation: blobPulse 7s ease-in-out infinite;
    }

    .sec-pills {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: .75rem;
        margin-top: 2rem;
    }

    .sec-pill {
        display: flex;
        align-items: center;
        gap: 8px;
        background: rgba(255, 255, 255, .07);
        border: 1px solid rgba(255, 255, 255, .12);
        border-radius: 50px;
        padding: .5rem 1.2rem;
        font-size: .85rem;
        font-weight: 600;
        color: rgba(255, 255, 255, .9);
    }

    /* Dark mode extras */
    [data-theme="dark"] .cv-card {
        background: var(--surface-2);
    }

    [data-theme="dark"] .drop-zone {
        background: var(--surface);
    }

    [data-theme="dark"] .format-select {
        background: var(--surface-2);
    }
</style>
{% endblock %}

{% block content %}
<div class="cv-page">

    <!-- â”€â”€â”€ Hero â”€â”€â”€ -->
    <section class="cv-hero">
        <div class="blob b1"></div>
        <div class="blob b2"></div>
        <div class="blob b3"></div>
        <div class="container">
            <div class="row align-items-center g-5">
                <div class="col-lg-5">
                    <div class="cv-badge reveal"><span class="dot"></span> 100% Free Â· No Signup Required</div>
                    <h1 class="cv-title reveal delay-1">Convert any file<br><span class="text-grad">instantly.</span>
                    </h1>
                    <p class="cv-sub reveal delay-2">Drag and drop your file. Choose a format. Download in seconds.
                        Everything runs in your browser â€” your files never leave your device.</p>
                    <div class="fmt-chips reveal delay-3">
                        <span class="fmt-chip pdf"><i class="bi bi-file-earmark-pdf-fill"></i> PDF</span>
                        <span class="fmt-chip png"><i class="bi bi-file-earmark-image-fill"></i> PNG</span>
                        <span class="fmt-chip jpg"><i class="bi bi-image-fill"></i> JPG</span>
                        <span class="fmt-chip webp"><i class="bi bi-file-earmark-richtext-fill"></i> WEBP</span>
                        <span class="fmt-chip txt"
                            style="color:#e74c3c;border-color:rgba(231,76,60,.3);background:rgba(231,76,60,.08);"><i
                                class="bi bi-file-earmark-play-fill"></i> GIF</span>
                        <span class="fmt-chip doc"
                            style="color:#06b6d4;border-color:rgba(6,182,212,.3);background:rgba(6,182,212,.08);"><i
                                class="bi bi-vector-pen"></i> SVG</span>
                        <span class="fmt-chip txt"><i class="bi bi-file-earmark-text-fill"></i> TXT</span>
                    </div>
                </div>
                <div class="col-lg-7 reveal-right">
                    <!-- Converter Card -->
                    <div class="cv-card">
                        <!-- Drop Zone -->
                        <div class="drop-zone" id="dropZone">
                            <input type="file" class="drop-input" id="fileInput"
                                accept="image/*,.pdf,.txt,.csv,.md,.svg">
                            <span class="drop-icon">ðŸ“‚</span>
                            <div class="drop-title">Drop your file here</div>
                            <div class="drop-sub">PNG, JPG, WEBP, BMP, GIF, SVG, PDF, TXT, CSV, MD</div>
                        </div>

                        <!-- File preview -->
                        <div class="file-preview" id="filePreview">
                            <div class="fp-icon" id="fpIcon">ðŸ“„</div>
                            <div>
                                <div class="fp-name" id="fpName">filename.png</div>
                                <div class="fp-size" id="fpSize">0 KB</div>
                            </div>
                            <button class="fp-remove" id="fpRemove" title="Remove file"><i
                                    class="bi bi-x-lg"></i></button>
                        </div>

                        <!-- Format row -->
                        <div class="format-row">
                            <div class="format-box">
                                <label>From</label>
                                <select class="format-select" id="fromFormat" disabled>
                                    <option value="">Auto-detect</option>
                                </select>
                            </div>
                            <button class="swap-btn" id="swapBtn" title="Swap formats"><i
                                    class="bi bi-arrow-left-right"></i></button>
                            <div class="format-box">
                                <label>To</label>
                                <select class="format-select" id="toFormat">
                                    <option value="">Select output format</option>
                                </select>
                            </div>
                        </div>

                        <!-- PDF page options (shown only for PDF â†’ image) -->
                        <div id="pdfPageOptions"
                            style="display:none;margin-top:1rem;padding:1rem;border-radius:12px;background:var(--surface);border:1.5px solid rgba(67,97,238,.2);">
                            <div
                                style="font-size:.72rem;font-weight:700;text-transform:uppercase;letter-spacing:.05em;color:var(--text-light);margin-bottom:.7rem;">
                                ðŸ“„ PDF Page Options</div>
                            <div style="display:flex;gap:.75rem;flex-wrap:wrap;">
                                <label
                                    style="display:flex;align-items:center;gap:7px;cursor:pointer;font-size:.88rem;font-weight:600;">
                                    <input type="radio" name="pdfPages" id="pdfFirst" value="first" checked
                                        style="accent-color:var(--blue);width:15px;height:15px;">
                                    ðŸ—Ž First page only
                                </label>
                                <label
                                    style="display:flex;align-items:center;gap:7px;cursor:pointer;font-size:.88rem;font-weight:600;">
                                    <input type="radio" name="pdfPages" id="pdfAll" value="all"
                                        style="accent-color:var(--blue);width:15px;height:15px;">
                                    ðŸ“¦ All pages (ZIP)
                                </label>
                            </div>
                            <div id="pdfPageCount" style="font-size:.75rem;color:var(--text-light);margin-top:.5rem;">
                            </div>
                        </div>

                        <!-- Progress -->
                        <div class="progress-wrap" id="progressWrap">
                            <div style="font-size:.78rem;color:var(--text-light);margin-bottom:.4rem;"
                                id="progressLabel">Convertingâ€¦</div>
                            <div class="progress-bar-bg">
                                <div class="progress-bar-fill" id="progressFill"></div>
                            </div>
                        </div>

                        <!-- Convert button -->
                        <button class="btn-convert" id="convertBtn" disabled>
                            <i class="bi bi-arrow-left-right"></i> Convert File
                        </button>

                        <!-- Download banner -->
                        <div class="download-banner" id="downloadBanner">
                            <div>
                                <div style="font-size:.88rem;font-weight:700;color:#10b981;"><i
                                        class="bi bi-check-circle-fill me-1"></i>Done!</div>
                                <div style="font-size:.78rem;color:var(--text-light);" id="downloadInfo"></div>
                            </div>
                            <button class="btn-download" id="downloadBtn"><i class="bi bi-download"></i>
                                Download</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- â”€â”€â”€ Supported Formats â”€â”€â”€ -->
    <section class="formats-section">
        <div class="container">
            <div class="text-center reveal">
                <div class="tag-gradient mb-3"><i class="bi bi-grid-3x3-gap-fill"></i> Supported Formats</div>
                <h2 style="font-size:2rem;font-weight:800;letter-spacing:-1px;">Everything you need,<br><span
                        class="text-grad">nothing you don't.</span></h2>
            </div>
            <div class="fmt-grid">
                <div class="fmt-card reveal delay-1">
                    <div class="fc-icon">ðŸ–¼ï¸</div>
                    <div class="fc-name">JPG</div>
                    <div class="fc-desc">JPEG images</div>
                </div>
                <div class="fmt-card reveal delay-1">
                    <div class="fc-icon">ðŸ“¸</div>
                    <div class="fc-name">PNG</div>
                    <div class="fc-desc">Lossless images</div>
                </div>
                <div class="fmt-card reveal delay-2">
                    <div class="fc-icon">ðŸŒ</div>
                    <div class="fc-name">WEBP</div>
                    <div class="fc-desc">Modern web format</div>
                </div>
                <div class="fmt-card reveal delay-2">
                    <div class="fc-icon">ðŸ–¼</div>
                    <div class="fc-name">BMP</div>
                    <div class="fc-desc">Bitmap image</div>
                </div>
                <div class="fmt-card reveal delay-3">
                    <div class="fc-icon">ðŸŽžï¸</div>
                    <div class="fc-name">GIF</div>
                    <div class="fc-desc">Animated image</div>
                </div>
                <div class="fmt-card reveal delay-3">
                    <div class="fc-icon">âœï¸</div>
                    <div class="fc-name">SVG</div>
                    <div class="fc-desc">Vector graphic</div>
                </div>
                <div class="fmt-card reveal delay-4">
                    <div class="fc-icon">ðŸ“„</div>
                    <div class="fc-name">PDF</div>
                    <div class="fc-desc">Multi-page doc</div>
                </div>
                <div class="fmt-card reveal delay-4">
                    <div class="fc-icon">ðŸ“</div>
                    <div class="fc-name">TXT</div>
                    <div class="fc-desc">Plain text</div>
                </div>
                <div class="fmt-card reveal delay-5">
                    <div class="fc-icon">ðŸ“Š</div>
                    <div class="fc-name">CSV</div>
                    <div class="fc-desc">Spreadsheet data</div>
                </div>
                <div class="fmt-card reveal delay-5">
                    <div class="fc-icon">ðŸ“‹</div>
                    <div class="fc-name">MD</div>
                    <div class="fc-desc">Markdown</div>
                </div>
            </div>
        </div>
    </section>

    <!-- â”€â”€â”€ 3-Step Process â”€â”€â”€ -->
    <section class="steps-section">
        <div class="container">
            <div class="text-center reveal mb-5">
                <div class="tag-gradient mb-3"><i class="bi bi-lightning-fill"></i> Dead simple</div>
                <h2 style="font-size:2rem;font-weight:800;letter-spacing:-1px;">Ready in <span class="text-grad">3
                        steps.</span></h2>
            </div>
            <div class="row g-4">
                <div class="col-md-4">
                    <div class="step-card reveal delay-1">
                        <div class="step-num"
                            style="background:linear-gradient(135deg,rgba(67,97,238,.15),rgba(67,97,238,.05));">ðŸ“‚</div>
                        <h5>Upload</h5>
                        <p>Drag & drop your file or click to browse. We support images, PDFs, and text files.</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="step-card reveal delay-2">
                        <div class="step-num"
                            style="background:linear-gradient(135deg,rgba(255,107,53,.15),rgba(255,107,53,.05));">âš™ï¸
                        </div>
                        <h5>Convert</h5>
                        <p>Pick your target format and hit Convert. It all happens in your browser â€” instant and
                            private.</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="step-card reveal delay-3">
                        <div class="step-num"
                            style="background:linear-gradient(135deg,rgba(16,185,129,.15),rgba(16,185,129,.05));">â¬‡ï¸
                        </div>
                        <h5>Download</h5>
                        <p>Your converted file is ready. One click to save it wherever you need it.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- â”€â”€â”€ Security section â”€â”€â”€ -->
    <section class="security-section">
        <div class="container">
            <div class="sec-card reveal">
                <div style="position:relative;z-index:1;">
                    <div class="tag-gradient mb-3" style="display:inline-flex;"><i class="bi bi-shield-check-fill"></i>
                        Privacy First</div>
                    <h2 style="font-size:2rem;font-weight:800;color:#fff;margin-bottom:.8rem;">Your files stay on <span
                            class="text-grad">your device.</span></h2>
                    <p style="color:rgba(255,255,255,.7);max-width:500px;margin:0 auto 2rem;line-height:1.7;">We never
                        upload your files to any server. Every conversion runs entirely in your browser using Web APIs.
                        No accounts, no storage, no tracking.</p>
                    <div class="sec-pills">
                        <span class="sec-pill"><i class="bi bi-shield-lock-fill" style="color:var(--blue);"></i> No
                            uploads</span>
                        <span class="sec-pill"><i class="bi bi-lightning-fill" style="color:var(--orange);"></i> Instant
                            conversion</span>
                        <span class="sec-pill"><i class="bi bi-eye-slash-fill" style="color:#7209b7;"></i> No
                            tracking</span>
                        <span class="sec-pill"><i class="bi bi-infinity" style="color:#10b981;"></i> Unlimited
                            use</span>
                        <span class="sec-pill"><i class="bi bi-phone-fill" style="color:#f59e0b;"></i> Works
                            offline</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

</div>
{% endblock %}

{% block extra_scripts %}
<!-- jsPDF for imageâ†’PDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<!-- PDF.js for PDFâ†’image -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
<!-- JSZip for all-pages ZIP -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

<script>
    // â”€â”€â”€ Format definitions â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const FORMAT_MAP = {
        image: {
            label: 'Image',
            detect: ['image/jpeg', 'image/png', 'image/webp', 'image/bmp', 'image/gif', 'image/svg+xml'],
            ext: ['jpg', 'png', 'webp', 'bmp', 'gif', 'svg'],
            outputs: [
                { value: 'jpg', label: 'JPG â€” JPEG image' },
                { value: 'png', label: 'PNG â€” Lossless image' },
                { value: 'webp', label: 'WEBP â€” Web image' },
                { value: 'bmp', label: 'BMP â€” Bitmap image' },
                { value: 'pdf', label: 'PDF â€” Document' },
            ]
        },
        pdf: {
            label: 'PDF',
            detect: ['application/pdf'],
            ext: ['pdf'],
            outputs: [
                { value: 'png', label: 'PNG â€” Image' },
                { value: 'jpg', label: 'JPG â€” Image' },
            ]
        },
        text: {
            label: 'Text',
            detect: ['text/plain', 'text/csv', 'text/markdown'],
            ext: ['txt', 'csv', 'md'],
            outputs: [
                { value: 'txt', label: 'TXT â€” Plain text' },
                { value: 'csv', label: 'CSV â€” Comma separated' },
                { value: 'md', label: 'MD â€” Markdown' },
            ]
        }
    };

    // â”€â”€â”€ State â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    let currentFile = null;
    let currentType = null;
    let downloadURL = null;
    let downloadName = null;

    // â”€â”€â”€ DOM refs â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const dropZone = document.getElementById('dropZone');
    const fileInput = document.getElementById('fileInput');
    const filePreview = document.getElementById('filePreview');
    const fpIcon = document.getElementById('fpIcon');
    const fpName = document.getElementById('fpName');
    const fpSize = document.getElementById('fpSize');
    const fpRemove = document.getElementById('fpRemove');
    const fromFormat = document.getElementById('fromFormat');
    const toFormat = document.getElementById('toFormat');
    const convertBtn = document.getElementById('convertBtn');
    const progressWrap = document.getElementById('progressWrap');
    const progressFill = document.getElementById('progressFill');
    const progressLabel = document.getElementById('progressLabel');
    const dlBanner = document.getElementById('downloadBanner');
    const dlInfo = document.getElementById('downloadInfo');
    const dlBtn = document.getElementById('downloadBtn');
    const pdfPageOpts = document.getElementById('pdfPageOptions');
    const pdfPageCount = document.getElementById('pdfPageCount');

    // â”€â”€â”€ Drag & Drop â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    dropZone.addEventListener('dragover', e => { e.preventDefault(); dropZone.classList.add('drag-over'); });
    dropZone.addEventListener('dragleave', () => dropZone.classList.remove('drag-over'));
    dropZone.addEventListener('drop', e => {
        e.preventDefault(); dropZone.classList.remove('drag-over');
        const f = e.dataTransfer.files[0];
        if (f) loadFile(f);
    });
    fileInput.addEventListener('change', e => { if (e.target.files[0]) loadFile(e.target.files[0]); });

    function loadFile(file) {
        currentFile = file;
        currentType = detectType(file);
        fpName.textContent = file.name;
        fpSize.textContent = formatSize(file.size);
        fpIcon.textContent = typeIcon(currentType);
        filePreview.classList.add('show');
        dropZone.classList.add('has-file');
        fromFormat.innerHTML = `<option value="${currentType}">${FORMAT_MAP[currentType]?.label || currentType} (auto-detected)</option>`;
        populateOutputs(currentType);
        resetResult();
        // Pre-read page count for PDF
        if (currentType === 'pdf') prefetchPdfPageCount(file);
    }

    function detectType(file) {
        if (file.type === 'image/svg+xml' || file.name.toLowerCase().endsWith('.svg')) return 'image';
        if (FORMAT_MAP.image.detect.includes(file.type)) return 'image';
        if (FORMAT_MAP.pdf.detect.includes(file.type)) return 'pdf';
        if (FORMAT_MAP.text.detect.includes(file.type)) return 'text';
        const ext = file.name.split('.').pop().toLowerCase();
        if (['jpg', 'jpeg', 'png', 'webp', 'bmp', 'gif', 'svg'].includes(ext)) return 'image';
        if (ext === 'pdf') return 'pdf';
        if (['txt', 'csv', 'md'].includes(ext)) return 'text';
        return 'text';
    }

    function populateOutputs(type) {
        const opts = FORMAT_MAP[type]?.outputs || [];
        toFormat.innerHTML = '<option value="">Select output format</option>' +
            opts.map(o => `<option value="${o.value}">${o.label}</option>`).join('');
        checkReady();
    }

    // â”€â”€â”€ PDF page options visibility â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    toFormat.addEventListener('change', () => {
        const showPdfOpts = currentType === 'pdf' && ['png', 'jpg'].includes(toFormat.value);
        pdfPageOpts.style.display = showPdfOpts ? 'block' : 'none';
        checkReady();
    });

    // â”€â”€â”€ Pre-fetch PDF page count â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    let cachedPdfDoc = null;
    async function prefetchPdfPageCount(file) {
        try {
            pdfjsLib.GlobalWorkerOptions.workerSrc =
                'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
            const ab = await file.arrayBuffer();
            cachedPdfDoc = await pdfjsLib.getDocument({ data: ab }).promise;
            pdfPageCount.textContent = `ðŸ“„ ${cachedPdfDoc.numPages} page${cachedPdfDoc.numPages > 1 ? 's' : ''} detected`;
        } catch (e) { pdfPageCount.textContent = ''; }
    }

    function checkReady() {
        convertBtn.disabled = !(currentFile && toFormat.value);
    }

    // â”€â”€â”€ Remove file â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    fpRemove.addEventListener('click', () => {
        currentFile = null; currentType = null; cachedPdfDoc = null;
        filePreview.classList.remove('show');
        dropZone.classList.remove('has-file');
        fileInput.value = '';
        fromFormat.innerHTML = '<option value="">Auto-detect</option>';
        toFormat.innerHTML = '<option value="">Select output format</option>';
        pdfPageOpts.style.display = 'none';
        pdfPageCount.textContent = '';
        document.getElementById('pdfFirst').checked = true;
        resetResult();
        convertBtn.disabled = true;
    });

    // â”€â”€â”€ Helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function typeIcon(t) { return { image: 'ðŸ–¼ï¸', pdf: 'ðŸ“„', text: 'ðŸ“' }[t] || 'ðŸ“„'; }
    function formatSize(b) {
        if (b < 1024) return b + ' B';
        if (b < 1048576) return (b / 1024).toFixed(1) + ' KB';
        return (b / 1048576).toFixed(2) + ' MB';
    }
    function resetResult() {
        dlBanner.classList.remove('show');
        progressWrap.classList.remove('show');
        progressFill.style.width = '0%';
        if (downloadURL) { URL.revokeObjectURL(downloadURL); downloadURL = null; }
    }
    function setProgress(pct, label) {
        progressWrap.classList.add('show');
        progressFill.style.width = pct + '%';
        if (label) progressLabel.textContent = label;
    }
    function showDownload(url, name) {
        downloadURL = url; downloadName = name;
        dlInfo.textContent = 'Ready: ' + name;
        dlBanner.classList.add('show');
        progressWrap.classList.remove('show');
    }

    // â”€â”€â”€ Download button â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    dlBtn.addEventListener('click', () => {
        if (!downloadURL) return;
        const a = document.createElement('a');
        a.href = downloadURL; a.download = downloadName; a.click();
    });

    // â”€â”€â”€ Convert dispatcher â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    convertBtn.addEventListener('click', async () => {
        if (!currentFile || !toFormat.value) return;
        convertBtn.disabled = true;
        resetResult();
        setProgress(5, 'Startingâ€¦');
        try {
            const out = toFormat.value;
            const baseName = currentFile.name.replace(/\.[^.]+$/, '');
            if (currentType === 'image') {
                out === 'pdf' ? await imgToPdf(currentFile, baseName) : await imgToImg(currentFile, out, baseName);
            } else if (currentType === 'pdf') {
                const mode = document.querySelector('input[name="pdfPages"]:checked')?.value || 'first';
                mode === 'all' ? await pdfToImgAll(currentFile, out, baseName)
                    : await pdfToImgSingle(currentFile, out, baseName, 1);
            } else {
                await textToText(currentFile, out, baseName);
            }
        } catch (err) {
            alert('Conversion failed: ' + err.message);
            convertBtn.disabled = false;
            progressWrap.classList.remove('show');
        }
    });

    // â”€â”€â”€ Image â†’ Image (Canvas API â€” handles JPG/PNG/WEBP/BMP/GIF/SVG) â”€â”€â”€â”€â”€â”€
    function imgToImg(file, outFmt, baseName) {
        return new Promise((resolve, reject) => {
            const url = URL.createObjectURL(file);
            const img = new Image();
            img.onload = () => {
                setProgress(60, 'Renderingâ€¦');
                const canvas = document.createElement('canvas');
                canvas.width = img.naturalWidth; canvas.height = img.naturalHeight;
                const ctx = canvas.getContext('2d');
                if (outFmt === 'jpg') { ctx.fillStyle = '#fff'; ctx.fillRect(0, 0, canvas.width, canvas.height); }
                ctx.drawImage(img, 0, 0);
                URL.revokeObjectURL(url);
                setProgress(90, 'Encodingâ€¦');
                const mimeMap = { jpg: 'image/jpeg', png: 'image/png', webp: 'image/webp', bmp: 'image/bmp' };
                canvas.toBlob(blob => {
                    if (!blob) return reject(new Error('Canvas conversion failed'));
                    showDownload(URL.createObjectURL(blob), `${baseName}.${outFmt}`);
                    convertBtn.disabled = false;
                    resolve();
                }, mimeMap[outFmt] || 'image/png', outFmt === 'jpg' ? 0.95 : undefined);
            };
            img.onerror = () => reject(new Error('Failed to load image â€” SVG may need width/height attributes'));
            img.src = url;
        });
    }

    // â”€â”€â”€ Image â†’ PDF â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    async function imgToPdf(file, baseName) {
        const { jsPDF } = window.jspdf;
        const dataUrl = await fileToDataUrl(file);
        setProgress(50, 'Building PDFâ€¦');
        const img = new Image();
        await new Promise((res, rej) => { img.onload = res; img.onerror = rej; img.src = dataUrl; });
        setProgress(75, 'Encodingâ€¦');
        const w = img.naturalWidth, h = img.naturalHeight;
        const pdf = new jsPDF({ orientation: w > h ? 'l' : 'p', unit: 'px', format: [w, h] });
        pdf.addImage(dataUrl, 'JPEG', 0, 0, w, h);
        setProgress(95, 'Finalisingâ€¦');
        showDownload(URL.createObjectURL(pdf.output('blob')), `${baseName}.pdf`);
        convertBtn.disabled = false;
    }

    // â”€â”€â”€ PDF â†’ Image: single page â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    async function pdfToImgSingle(file, outFmt, baseName, pageNum) {
        const pdfDoc = await loadPdf(file);
        setProgress(30, `Rendering page ${pageNum}â€¦`);
        const blob = await renderPdfPage(pdfDoc, pageNum, outFmt);
        setProgress(95, 'Done!');
        showDownload(URL.createObjectURL(blob), `${baseName}_p${pageNum}.${outFmt}`);
        convertBtn.disabled = false;
    }

    // â”€â”€â”€ PDF â†’ Image: ALL pages â†’ ZIP â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    async function pdfToImgAll(file, outFmt, baseName) {
        const pdfDoc = await loadPdf(file);
        const total = pdfDoc.numPages;
        const zip = new JSZip();
        for (let i = 1; i <= total; i++) {
            setProgress(Math.round(10 + (i / total) * 80), `Rendering page ${i} of ${total}â€¦`);
            const blob = await renderPdfPage(pdfDoc, i, outFmt);
            const pad = String(i).padStart(String(total).length, '0');
            zip.file(`${baseName}_p${pad}.${outFmt}`, blob);
        }
        setProgress(95, 'Creating ZIPâ€¦');
        const zipBlob = await zip.generateAsync({ type: 'blob' });
        showDownload(URL.createObjectURL(zipBlob), `${baseName}_all_pages.zip`);
        convertBtn.disabled = false;
    }

    // â”€â”€â”€ PDF helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    async function loadPdf(file) {
        pdfjsLib.GlobalWorkerOptions.workerSrc =
            'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
        if (cachedPdfDoc) return cachedPdfDoc;
        setProgress(10, 'Loading PDFâ€¦');
        const ab = await file.arrayBuffer();
        setProgress(20, 'Parsingâ€¦');
        return pdfjsLib.getDocument({ data: ab }).promise;
    }

    async function renderPdfPage(pdfDoc, pageNum, outFmt) {
        const page = await pdfDoc.getPage(pageNum);
        const viewport = page.getViewport({ scale: 2 });
        const canvas = document.createElement('canvas');
        canvas.width = viewport.width;
        canvas.height = viewport.height;
        await page.render({ canvasContext: canvas.getContext('2d'), viewport }).promise;
        const mimeMap = { png: 'image/png', jpg: 'image/jpeg' };
        return new Promise(res => canvas.toBlob(res, mimeMap[outFmt] || 'image/png', 0.95));
    }

    // â”€â”€â”€ Text â†’ Text â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    async function textToText(file, outFmt, baseName) {
        setProgress(50, 'Readingâ€¦');
        const text = await file.text();
        setProgress(90, 'Savingâ€¦');
        const mimeMap = { txt: 'text/plain', csv: 'text/csv', md: 'text/markdown' };
        showDownload(URL.createObjectURL(new Blob([text], { type: mimeMap[outFmt] || 'text/plain' })), `${baseName}.${outFmt}`);
        convertBtn.disabled = false;
    }

    // â”€â”€â”€ Utility â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function fileToDataUrl(file) {
        return new Promise((res, rej) => {
            const r = new FileReader();
            r.onload = e => res(e.target.result);
            r.onerror = rej;
            r.readAsDataURL(file);
        });
    }
</script>
{% endblock %}
